{"version":3,"sources":["jsdom.js"],"names":["html","JSDOM","runScripts","window","document","textarea","querySelector","btn","list","text","click","t","is","children","length","value","innerHTML","falsy"],"mappings":";;;;;AAAA;;;;AACA;;;;AAEA,IAAMA,6xBAAN;;WA6BiB,IAAIC,YAAJ,CAAUD,IAAV,EAAgB,EAACE,YAAY,aAAb,EAAhB,C;IAAVC,M,QAAAA,M;;AACP,IAAMC,WAAWD,OAAOC,QAAxB;;AAEA,mBAAK,oCAAL,EAA2C,aAAK;AAAA;;AAC5C,QAAMC,WAAWD,SAASE,aAAT,CAAuB,uBAAvB,CAAjB;AACA,QAAMC,MAAMH,SAASE,aAAT,CAAuB,MAAvB,CAAZ;AACA,QAAME,OAAOJ,SAASE,aAAT,CAAuB,OAAvB,CAAb;AACA,QAAMG,OAAO,aAAb;;AAEAF,QAAIG,KAAJ,GAN4C,CAMC;AAC7CC,MAAEC,EAAF,CAAKJ,KAAKK,QAAL,CAAcC,MAAnB,EAA2B,CAA3B,EAP4C,CAOC;;AAE7CT,aAASU,KAAT,GAAiBN,IAAjB,CAT4C,CASC;AAC7CF,QAAIG,KAAJ,GAV4C,CAUC;AAC7CC,MAAEC,EAAF,CAAKJ,KAAKK,QAAL,CAAcC,MAAnB,EAA2B,CAA3B,EAX4C,CAWC;AAC7CH,MAAEC,EAAF,CAAKJ,KAAKK,QAAL,CAAc,CAAd,EAAiBG,SAAtB,EAAiCP,IAAjC,EAZ4C,CAYC;AAC7CE,MAAEM,KAAF,uBAAQ,2CAASF,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAb4C,CAaC;AAChD,CAdD","file":"jsdom.js","sourcesContent":["import test from 'ava';\nimport {JSDOM} from 'jsdom';\n\nconst html = `\n<!DOCTYPE html>\n<html>\n<head></head>\n<body>\n    <div class=\"comment-box\">\n        <textarea></textarea>\n        <div class=\"btn\">发布</div>\n        <ul class=\"list\"></ul>\n    </div>\n    <script>\n        const textarea = document.querySelector('.comment-box textarea');\n        const btn = document.querySelector('.btn');\n        const list = document.querySelector('.list');\n\n        btn.addEventListener('click', () => {\n            const content = textarea.value;\n            if (content) {\n                const li = document.createElement('li');\n                li.innerHTML = content;\n                list.insertBefore(li, list.children[0]);\n                textarea.value = '';\n            }\n        });\n    </script>\n</body>\n</html>\n`;\n\nconst {window} = new JSDOM(html, {runScripts: 'dangerously'});\nconst document = window.document;\n\ntest('emulate DOM environment with JSDOM', t => {\n    const textarea = document.querySelector('.comment-box textarea');\n    const btn = document.querySelector('.btn');\n    const list = document.querySelector('.list');\n    const text = 'hello world';\n\n    btn.click();                                 // 触发按钮的点击事件，此时文本框中没有输入内容\n    t.is(list.children.length, 0);               // 列表应该保持为空\n\n    textarea.value = text;                       // 文本框中输入内容\n    btn.click();                                 // 触发按钮的点击事件\n    t.is(list.children.length, 1);               // 此时列表的长度应该为 1\n    t.is(list.children[0].innerHTML, text);      // 此时，第一个评论的内容应该等于刚刚我们输入的内容\n    t.falsy(textarea.value);                     // 评论完后，文本框应该清空   \n});\n"]}